(()=>{var e={184:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var l=typeof n;if("string"===l||"number"===l)e.push(n);else if(Array.isArray(n)){if(n.length){var a=r.apply(null,n);a&&e.push(a)}}else if("object"===l){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var c in n)o.call(n,c)&&n[c]&&e.push(c)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,n),l.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.blocks,t=window.React;var o=n(184),r=n.n(o);const l=window.wp.data,a=window.wp.i18n,c=window.wp.blockEditor,s=window.wp.element,i=window.wp.components,d=window.wp.primitives,u=(0,t.createElement)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(d.Path,{d:"M4 4v1.5h16V4H4zm8 8.5h8V11h-8v1.5zM4 20h16v-1.5H4V20zm4-8c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2z"})),p=(0,t.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(d.Path,{d:"m3 5c0-1.10457.89543-2 2-2h13.5c1.1046 0 2 .89543 2 2v13.5c0 1.1046-.8954 2-2 2h-13.5c-1.10457 0-2-.8954-2-2zm2-.5h6v6.5h-6.5v-6c0-.27614.22386-.5.5-.5zm-.5 8v6c0 .2761.22386.5.5.5h6v-6.5zm8 0v6.5h6c.2761 0 .5-.2239.5-.5v-6zm0-8v6.5h6.5v-6c0-.27614-.2239-.5-.5-.5z",fillRule:"evenodd",clipRule:"evenodd"})),m=[["feedland/feed-item-title"],["feedland/feed-item-date"]];function f(){const e=(0,c.useInnerBlocksProps)({className:"wp-block-post"},{template:m,__unstableDisableLayoutClassNames:!0});return(0,t.createElement)("li",{...e})}const v=(0,s.memo)((function({blocks:e,blockContextId:n,isHidden:o,setActiveBlockContextId:r}){const l=(0,c.__experimentalUseBlockPreview)({blocks:e,props:{className:"wp-block-post"}}),a=()=>{r(n)},s={display:o?"none":void 0};return(0,t.createElement)("li",{...l,tabIndex:0,role:"button",onClick:a,onKeyPress:a,style:s})})),w=JSON.parse('{"u2":"feedland/feed-template"}');(0,e.registerBlockType)(w.u2,{edit:function({setAttributes:e,clientId:n,context:{"feedland/query":{perPage:o,category:d,screenName:m}}={},attributes:{layout:w},__unstableLayoutClassNames:h}){const{type:y,columnCount:g=3}=w||{},[b,k]=(0,s.useState)(),[x,E]=(0,s.useState)([]),[C,_]=(0,s.useState)(!0),S=(0,l.useSelect)((e=>{const{getBlocks:t}=e(c.store);return t(n)}),[]);(0,s.useEffect)((()=>{_(!0),fetch(`https://feedland.com/getriverfromcategory?screenname=${m}&catname=${d}`).then((e=>e.json())).then((e=>{E(e.feeds.flatMap((e=>e.items)).splice(0,o))})).catch((()=>{E([])})).finally((()=>_(!1)))}),[m,d,o]);const B=(0,s.useMemo)((()=>x?.map((e=>({"feedland/feed-item":e})))),[x]),P=(0,c.useBlockProps)({className:r()(h,{[`columns-${g}`]:"grid"===y&&g})});if(C)return(0,t.createElement)("p",{...P},(0,t.createElement)(i.Spinner,null));if(!x.length)return(0,t.createElement)("p",{...P}," ",(0,a.__)("No results found.","feedland"));const z=t=>e({layout:{...w,...t}}),I=[{icon:u,title:(0,a.__)("List view","feedland"),onClick:()=>z({type:"default"}),isActive:"default"===y||"constrained"===y},{icon:p,title:(0,a.__)("Grid view","feedland"),onClick:()=>z({type:"grid",columnCount:g}),isActive:"grid"===y}];return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(c.BlockControls,null,(0,t.createElement)(i.ToolbarGroup,{controls:I})),(0,t.createElement)("ul",{...P},B&&B.map(((e,n)=>(0,t.createElement)(c.BlockContextProvider,{key:n,value:e},n===(b||B[0]?.["feedland/feed-item"])?(0,t.createElement)(f,null):null,(0,t.createElement)(v,{blocks:S,blockContextId:n,setActiveBlockContextId:k,isHidden:n===(b||B[0]?.["feedland/feed-item"])}))))))},save:function(){return(0,t.createElement)(c.InnerBlocks.Content,null)}})})()})();