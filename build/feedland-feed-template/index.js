(()=>{var e={967:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=c(e,l(n)))}return e}function l(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=c(t,n));return t}function c(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,n),l.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.blocks,t=window.React;var r=n(967),o=n.n(r);const l=window.wp.data,c=window.wp.i18n,a=window.wp.blockEditor,s=window.wp.element,i=window.wp.components,d=window.wp.primitives,u=(0,t.createElement)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(d.Path,{d:"M4 4v1.5h16V4H4zm8 8.5h8V11h-8v1.5zM4 20h16v-1.5H4V20zm4-8c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2z"})),p=(0,t.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(d.Path,{d:"m3 5c0-1.10457.89543-2 2-2h13.5c1.1046 0 2 .89543 2 2v13.5c0 1.1046-.8954 2-2 2h-13.5c-1.10457 0-2-.8954-2-2zm2-.5h6v6.5h-6.5v-6c0-.27614.22386-.5.5-.5zm-.5 8v6c0 .2761.22386.5.5.5h6v-6.5zm8 0v6.5h6c.2761 0 .5-.2239.5-.5v-6zm0-8v6.5h6.5v-6c0-.27614-.2239-.5-.5-.5z",fillRule:"evenodd",clipRule:"evenodd"})),m=[["feedland/feed-item-title"],["feedland/feed-item-date"]];function f(){const e=(0,a.useInnerBlocksProps)({className:"wp-block-post"},{template:m,__unstableDisableLayoutClassNames:!0});return(0,t.createElement)("li",{...e})}const v=(0,s.memo)((function({blocks:e,blockContextId:n,isHidden:r,setActiveBlockContextId:o}){const l=(0,a.__experimentalUseBlockPreview)({blocks:e,props:{className:"wp-block-post"}}),c=()=>{o(n)},s={display:r?"none":void 0};return(0,t.createElement)("li",{...l,tabIndex:0,role:"button",onClick:c,onKeyPress:c,style:s})})),w=JSON.parse('{"u2":"feedland/feed-template"}');(0,e.registerBlockType)(w.u2,{edit:function({setAttributes:e,clientId:n,context:{"feedland/query":{perPage:r,category:d,screenName:m}}={},attributes:{layout:w},__unstableLayoutClassNames:y}){const{type:h,columnCount:b=3}=w||{},[g,k]=(0,s.useState)(),[x,E]=(0,s.useState)([]),[C,_]=(0,s.useState)(!0),S=(0,l.useSelect)((e=>{const{getBlocks:t}=e(a.store);return t(n)}),[]);(0,s.useEffect)((()=>{_(!0),fetch(`https://feedland.com/getriverfromcategory?screenname=${m}&catname=${d}`).then((e=>e.json())).then((e=>{E(e.feeds.flatMap((e=>e.items)).splice(0,r))})).catch((()=>{E([])})).finally((()=>_(!1)))}),[m,d,r]);const B=(0,s.useMemo)((()=>x?.map((e=>({"feedland/feed-item":e})))),[x]),P=(0,a.useBlockProps)({className:o()(y,{[`columns-${b}`]:"grid"===h&&b})});if(C)return(0,t.createElement)("p",{...P},(0,t.createElement)(i.Spinner,null));if(!x.length)return(0,t.createElement)("p",{...P}," ",(0,c.__)("No results found.","feedland"));const z=t=>e({layout:{...w,...t}}),I=[{icon:u,title:(0,c.__)("List view","feedland"),onClick:()=>z({type:"default"}),isActive:"default"===h||"constrained"===h},{icon:p,title:(0,c.__)("Grid view","feedland"),onClick:()=>z({type:"grid",columnCount:b}),isActive:"grid"===h}];return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(a.BlockControls,null,(0,t.createElement)(i.ToolbarGroup,{controls:I})),(0,t.createElement)("ul",{...P},B&&B.map(((e,n)=>(0,t.createElement)(a.BlockContextProvider,{key:n,value:e},n===(g||B[0]?.["feedland/feed-item"])?(0,t.createElement)(f,null):null,(0,t.createElement)(v,{blocks:S,blockContextId:n,setActiveBlockContextId:k,isHidden:n===(g||B[0]?.["feedland/feed-item"])}))))))},save:function(){return(0,t.createElement)(a.InnerBlocks.Content,null)}})})()})();